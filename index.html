<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ø§ÙƒØªØ´Ù Ù…ØµØ± - Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ø³ÙŠØ§Ø­Ø© ÙÙŠ Ù…ØµØ±. Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§ØªØŒ Ø§Ù„Ù…Ø¹Ø§Ø¨Ø¯ Ø§Ù„ÙØ±Ø¹ÙˆÙ†ÙŠØ©ØŒ Ø´ÙˆØ§Ø·Ø¦ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±ØŒ Ø§Ù„ÙˆØ§Ø­Ø§ØªØŒ ÙˆØ§Ù„Ù…ØªØ§Ø­Ù. Ø£ÙƒØ«Ø± Ù…Ù† 7000 Ø³Ù†Ø© Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø­Ø¶Ø§Ø±Ø©.">
    <meta name="keywords" content="Ù…ØµØ±, Ø³ÙŠØ§Ø­Ø© Ù…ØµØ±, Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§Øª, Ù…Ø¹Ø§Ø¨Ø¯ ÙØ±Ø¹ÙˆÙ†ÙŠØ©, Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±, ÙˆØ§Ø­Ø§Øª Ù…ØµØ±, Ø§Ù„Ø³ÙŠØ§Ø­Ø© ÙÙŠ Ù…ØµØ±, Ø£Ù…Ø§ÙƒÙ† Ø³ÙŠØ§Ø­ÙŠØ©, Ø¯Ù„ÙŠÙ„ Ø³ÙŠØ§Ø­ÙŠ">
    <meta name="author" content="OMAR - Middle 2 Student">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Arabic, English, French">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://discover-egypt.web.app/">
    <meta property="og:title" content="Discover Egypt - Ø§ÙƒØªØ´Ù Ù…ØµØ± | Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„">
    <meta property="og:description" content="Ø§Ø³ØªÙƒØ´Ù 7000 Ø³Ù†Ø© Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø­Ø¶Ø§Ø±Ø©. Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ© ÙÙŠ Ù…ØµØ± Ù…Ø¹ Ø®Ø±Ø§Ø¦Ø· ØªÙØ§Ø¹Ù„ÙŠØ© ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙØµÙ„Ø©.">
    <meta property="og:image" content="https://discover-egypt.web.app/images/sunset-pyramids-giza-egypt.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://discover-egypt.web.app/">
    <meta property="twitter:title" content="Discover Egypt - Ø§ÙƒØªØ´Ù Ù…ØµØ±">
    <meta property="twitter:description" content="Ø¯Ù„ÙŠÙ„Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ© ÙÙŠ Ù…ØµØ±">
    <meta property="twitter:image" content="https://discover-egypt.web.app/images/sunset-pyramids-giza-egypt.jpg">
    
    <!-- PWA Tags -->
    <meta name="theme-color" content="#d4af37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Discover Egypt">
    
    <title>Discover Egypt - Ø§ÙƒØªØ´Ù Ù…ØµØ± | Tourism Guide</title>

    <link rel="icon" type="image/webp" href="images/giza-pyramids-frygia9m5ggjhaz1.webp"/>
    <link rel="shortcut icon" type="image/webp" href="images/giza-pyramids-frygia9m5ggjhaz1.webp" />

    <!-- ============================================
         CRITICAL: Prevent FOUC & Performance Optimization
         ============================================ -->
    <!-- Preload Critical CSS -->
    <link rel="preload" href="css/base.css" as="style">
    <link rel="preload" href="css/design-system.css" as="style">
    <link rel="preload" href="css/theme-enhanced.css" as="style">

    <!-- Critical Inline CSS to Prevent FOUC -->
    <style>
        /* Ù…Ù†Ø¹ FOUC - Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø­ØªÙ‰ ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        html {
            visibility: hidden;
            opacity: 0;
        }
        
        html.loaded {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.3s ease-in;
        }
        
        /* Loading Indicator */
        html::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 999999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        html.loaded::before {
            display: none;
        }
        
        /* Animation for loading spinner */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>

    <!-- Font Loading & FOUC Prevention Script -->
    <script>
        (function() {
            var startTime = performance.now();
            
            // Ø¥Ø¶Ø§ÙØ© class Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ ØªØ­Ù…ÙŠÙ„ DOM
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    document.documentElement.classList.add('dom-ready');
                });
            } else {
                document.documentElement.classList.add('dom-ready');
            }
            
            // Ø¥Ø¶Ø§ÙØ© class Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            window.addEventListener('load', function() {
                setTimeout(function() {
                    document.documentElement.classList.add('loaded');
                    var loadTime = performance.now() - startTime;
                    console.log('âš¡ Page loaded in:', Math.round(loadTime), 'ms');
                }, 100);
            });
            
            // Fallback - Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø­ØªÙ‰ Ù„Ùˆ ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            setTimeout(function() {
                if (!document.documentElement.classList.contains('loaded')) {
                    document.documentElement.classList.add('loaded');
                    console.warn('âš ï¸ Fallback: Forced content display after timeout');
                }
            }, 5000);
        })();
    </script>

    <!-- Performance Optimizer - Must be first JS file -->
    <script src="js/performance-optimizer.js"></script>

    <!-- CSS Link - New Design System -->
    <!-- Merged Base Styles (ØªÙ… Ø¯Ù…Ø¬ 5 Ù…Ù„ÙØ§Øª: base, design-system, text-contrast-fix, ui-improvements, enhancements) -->
    <link rel="stylesheet" href="css/merged-base.css">
    <!-- Enhanced Theme System (Dark/Light Mode) -->
    <link rel="stylesheet" href="css/theme-enhanced.css">
    <!-- Main Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/search-no-images.css">
    <link rel="stylesheet" href="css/explore-cards.css">
    <link rel="stylesheet" href="css/explore-cards-with-images.css">
    <link rel="stylesheet" href="css/calculator.css">
    <link rel="stylesheet" href="css/weather.css">
    <!-- Enhanced Weather System CSS -->
    <link rel="stylesheet" href="css/weather-enhanced.css">
    <link rel="stylesheet" href="css/auth-styles.css">
    <!-- AI Guide Enhanced CSS -->
    <link rel="stylesheet" href="css/ai-guide-enhanced.css">
    <!-- Enhanced UI/UX CSS -->
    <link rel="stylesheet" href="css/enhanced-ui-ux.css">
    <!-- Advanced Card Styles -->
    <link rel="stylesheet" href="css/advanced-cards.css">
    <!-- Mobile Optimizations -->
    <link rel="stylesheet" href="css/mobile-optimizations.css">
    <!-- Tablet Responsive -->
    <link rel="stylesheet" href="css/tablet-responsive.css">
    <link rel="stylesheet" href="css/plans-advanced.css">
    <link rel="stylesheet" href="css/plans-modal.css">
    <link rel="stylesheet" href="css/plans-wizard.css">
    <link rel="stylesheet" href="css/plans-dark-enhanced.css">
    <link rel="stylesheet" href="css/interactive-plans-system.css">
    <!-- Travel Planner Modal CSS -->
    <link rel="stylesheet" href="css/travel-planner-modal.css">
    <!-- Saved Plans Modal CSS -->
    <link rel="stylesheet" href="css/saved-plans-modal.css">
    <!-- Planner Dark Mode CSS -->
    <link rel="stylesheet" href="css/planner-dark-mode.css">
    <!-- Enhanced Search & User Menu CSS -->
    <link rel="stylesheet" href="css/search-user-enhanced.css">
    <!-- User Profile Enhanced CSS -->
    <link rel="stylesheet" href="css/user-profile-enhanced.css">
    <!-- Enhanced Navbar Buttons CSS -->
    <link rel="stylesheet" href="css/navbar-buttons-enhanced.css">
    <!-- Login Button Fix CSS -->
    <link rel="stylesheet" href="css/login-button-fix.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
</head>
<body>

<!-- Skip to main content for accessibility -->
<a href="#main-content" class="skip-link" data-translate="accessibility.skipToMain">Skip to main content</a>

<!-- ========== HEADER / NAVIGATION BAR ========== -->
<header class="header">
    <nav class="navbar">
        <!-- Logo -->
        <div class="logo">
            <h1 data-translate="site.title">Discover Egypt</h1>
        </div>

        <!-- Navigation Menu -->
        <ul class="nav-menu" id="nav-menu">
            <li><a href="#home" class="nav-link active" data-section="home" data-translate="nav.home">Home</a></li>
            <li><a href="#plans" class="nav-link" data-section="plans" data-translate="nav.plans">Plans</a></li>
            <li><a href="#calculator" class="nav-link" data-section="calculator" data-translate="nav.calculator">Budget Calculator</a></li>
            <li><a href="#weather" class="nav-link" data-section="weather" data-translate="nav.weather">Weather</a></li>
            <li><a href="#tools" class="nav-link" data-section="tools" data-translate="nav.tools">Tools</a></li>
            <li><a href="#settings" class="nav-link" data-section="settings">
                <i class="fas fa-cog"></i>
                <span class="sr-only" data-translate="nav.settings">Settings</span>
            </a></li>
            
            <!-- Mobile Only Items -->
            <li class="mobile-only-item auth-mobile-item" id="auth-mobile-item">
                <a href="login.html" class="mobile-auth-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    <span data-translate="auth.login">Login</span>
                </a>
            </li>
            <li class="mobile-only-item">
                <button class="mobile-search-btn" id="mobile-search-btn">
                    <i class="fas fa-search"></i>
                    <span data-translate="nav.search">Search</span>
                </button>
            </li>
        </ul>

        <!-- Right Side Controls -->
        <div class="nav-controls">
            <!-- Language Selector -->
            <select id="language-selector" class="language-select">
                <option value="en">English</option>
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="fr">FranÃ§ais</option>
            </select>

            <!-- Auth Buttons - Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† -->
            <div class="auth-buttons" id="auth-buttons">
                <a href="login.html" class="auth-btn login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    <span data-translate="auth.login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
                </a>
            </div>

            <!-- User Menu - Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† -->
            <div class="user-menu-container" id="user-menu-container" style="display: none;">
                <button class="user-menu-btn" id="user-menu-btn" aria-label="User menu">
                    <img class="user-photo" id="user-photo" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" src="">
                    <span class="user-display-name" id="user-display-name"></span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="user-dropdown" id="user-dropdown">
                    <!-- User Profile Header -->
                    <div class="user-profile-header">
                        <img class="user-photo-large" id="user-photo-large" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" src="">
                        <div class="user-profile-details">
                            <h3 class="user-profile-name" id="user-name-dropdown"></h3>
                            <p class="user-profile-email" id="user-email"></p>
                            <span class="user-auth-method" id="user-auth-method">
                                <i class="fas fa-envelope"></i>
                                <span data-translate="auth.emailAuth">Email Account</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="dropdown-divider"></div>
                    
                    <!-- User Menu Items -->
                    <div class="dropdown-menu-items">
                        <a href="#" class="dropdown-item" id="user-saved-plans" onclick="openSavedPlansFromDropdown()">
                            <i class="fas fa-bookmark"></i>
                            <span data-translate="plans.savedPlans">Saved Plans</span>
                            <span class="plans-badge" id="dropdown-plans-count">0</span>
                        </a>
                        <a href="#" class="dropdown-item" id="user-favorites">
                            <i class="fas fa-heart"></i>
                            <span data-translate="auth.favorites">Favorites</span>
                        </a>
                        <a href="#settings" class="dropdown-item" onclick="closeUserDropdown()">
                            <i class="fas fa-cog"></i>
                            <span data-translate="auth.settings">Settings</span>
                        </a>
                    </div>
                    
                    <div class="dropdown-divider"></div>
                    
                    <!-- Logout Button -->
                    <button class="dropdown-item logout-btn" onclick="handleLogout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span data-translate="auth.logout">Logout</span>
                    </button>
                </div>
            </div>

            <!-- Search Button - Desktop Only -->
            <button class="icon-btn search-btn desktop-only" aria-label="Search" id="desktop-search-btn">
                <i class="fas fa-search"></i>
            </button>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" aria-label="Toggle menu">
                <span class="hamburger"></span>
            </button>
        </div>
    </nav>
</header>

<!-- ========== MAIN CONTENT CONTAINER ========== -->
<main class="main-content" id="main-content">

    <!-- ========== HOME SECTION ========== -->
    <section id="home" class="section active">
        <!-- Hero Section with Background -->


        <img src="images/303474.webp" 
             alt="ØºØ±ÙˆØ¨ Ø§Ù„Ø´Ù…Ø³ Ø§Ù„Ø°Ù‡Ø¨ÙŠ Ø®Ù„Ù Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§Øª Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø© ÙÙŠ Ø§Ù„Ø¬ÙŠØ²Ø©ØŒ Ù…ØµØ± - Ù…Ù†Ø¸Ø± Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠ Ø®Ù„Ø§Ø¨ ÙŠØ¹ÙƒØ³ Ø¹Ø¸Ù…Ø© Ø§Ù„Ø­Ø¶Ø§Ø±Ø© Ø§Ù„ÙØ±Ø¹ÙˆÙ†ÙŠØ©" 
             class="hero-bg"
             loading="eager">
        <div class="hero-overlay"></div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
        <div class="hero-content">
            <h1 class="hero-title" data-translate="hero.title">Welcome to Egypt</h1>
            <p class="hero-subtitle" data-translate="hero.subtitle">
                Discover +7000 years of history and culture
            </p>
            <button class="cta-button" data-translate="hero.cta">
                Start Planning
            </button>
        </div>




    </section>

    <!-- ============= Tools ===============  -->
    <section id="tools" class="section tools">
        <div class="section-header">
            <h1 class="section-title" data-translate="tools.title">Tools</h1>
            <p class="section-subtitle" data-translate="tools.subtitle">Explore our tourism tools</p>
            <p class="section-intro" data-translate="tools.intro">
                Discover Egypt with our interactive tools. Plan your trip, explore destinations, get AI recommendations, and calculate your budget.
            </p>
        </div>

        <div class="tools-buttons">
            <a href="#explore" class="nav-link tool-card" data-section="explore">
                <div class="tool-icon">ğŸ—ºï¸</div>
                <h3><span data-translate="nav.exploreEgypt">Explore Egypt</span></h3>
            </a>
            <a href="#map" class="nav-link tool-card" data-section="map">
                <div class="tool-icon">ğŸŒ</div>
                <h3><span data-translate="nav.map">Map</span></h3>
            </a>
            <a href="#ai-guide" class="nav-link tool-card" data-section="ai-guide">
                <div class="tool-icon">ğŸ¤–</div>
                <h3><span data-translate="nav.smartGuide">Smart Guide</span></h3>
            </a>
            <a href="#calculator" class="nav-link tool-card" data-section="calculator">
                <div class="tool-icon">ğŸ§®</div>
                <h3><span data-translate="nav.calculator">Budget Calculator</span></h3>
            </a>
            <a href="#current-weather-tool" class="nav-link tool-card" data-section="current-weather-tool">
                <div class="tool-icon">ğŸŒ¡ï¸</div>
                <h3><span data-translate="tools.currentWeather">Current Weather</span></h3>
            </a>
            <a href="#weather-comparison-tool" class="nav-link tool-card" data-section="weather-comparison-tool">
                <div class="tool-icon">ğŸ“Š</div>
                <h3><span data-translate="tools.weatherComparison">Weather Comparison</span></h3>
            </a>
            <a href="#weather-map-tool" class="nav-link tool-card" data-section="weather-map-tool">
                <div class="tool-icon">ğŸ—ºï¸</div>
                <h3><span data-translate="tools.weatherMap">Weather Map</span></h3>
            </a>
        </div>
    </section>

    <!-- ========== CURRENT WEATHER TOOL ========== -->
    <section id="current-weather-tool" class="section">
        <div class="section-header">
            <h2 class="section-title">
                <span data-translate="tools.currentWeather">Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
            </h2>
            <p class="section-subtitle" data-translate="tools.currentWeatherDesc">
                Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ù„Ø£ÙŠ Ù…Ø­Ø§ÙØ¸Ø© ÙÙŠ Ù…ØµØ±
            </p>
        </div>
        <div id="current-weather-container"></div>
    </section>

    <!-- ========== WEATHER COMPARISON TOOL ========== -->
    <section id="weather-comparison-tool" class="section">
        <div class="section-header">
            <h2 class="section-title">
                <span data-translate="tools.weatherComparison">Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª</span>
            </h2>
            <p class="section-subtitle" data-translate="tools.weatherComparisonDesc">
                Ù‚Ø§Ø±Ù† Ø§Ù„Ø·Ù‚Ø³ Ø¨ÙŠÙ† Ø­ØªÙ‰ 4 Ù…Ø­Ø§ÙØ¸Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª
            </p>
        </div>
        <div id="weather-comparison-container"></div>
    </section>

    <!-- ========== WEATHER MAP TOOL ========== -->
    <section id="weather-map-tool" class="section">
        <div class="section-header">
            <h2 class="section-title">
                <span data-translate="tools.weatherMap">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ù‚Ø³</span>
            </h2>
            <p class="section-subtitle" data-translate="tools.weatherMapDesc">
                Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙØ¸Ø§Øª Ù…ØµØ± Ø¹Ù„Ù‰ Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©
            </p>
        </div>
        <div id="weather-map-container"></div>
    </section>

    <!-- ========== EXPLORE EGYPT SECTION ========== -->
    <section id="explore" class="section">
        <div class="section-header">
            <h2 class="section-title" data-translate="explore.title">Explore Egypt</h2>
            <p class="section-subtitle" data-translate="explore.subtitle">Browse by category</p>
        </div>

        <!-- Category Filter Buttons -->
        <div class="filter-buttons">
            <button class="filter-btn active" data-category="all" data-translate="explore.all">All</button>
            <button class="filter-btn" data-category="ancient" data-translate="explore.ancient">Ancient Sites</button>
            <button class="filter-btn" data-category="nature" data-translate="explore.nature">Nature</button>
            <button class="filter-btn" data-category="beach" data-translate="explore.beach">Beaches</button>
            <button class="filter-btn" data-category="museum" data-translate="explore.museum">Museums</button>
            <button class="filter-btn" data-category="religious" data-translate="explore.religious">Religious Sites</button>
            <button class="filter-btn" data-category="historical" data-translate="explore.historical">Historical Sites</button>
            <button class="filter-btn" data-category="modern" data-translate="explore.modern">Modern Cities</button>
            <button class="filter-btn" data-category="cultural" data-translate="explore.cultural">Cultural Sites</button>
        </div>

        <!-- Dynamic Cards Container - ALL 55 places loaded here -->
        <div class="explore-cards-grid" id="explore-cards-container">
            <!-- Cards will be loaded dynamically by explore-dynamic.js -->
            <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                <p data-translate="explore.loading">Loading places...</p>
            </div>
        </div>
    </section>

    <!-- ========== MAP SECTION ========== -->
    <!-- ========== TRAVEL PLANS SECTION ========== -->
    <section id="plans" class="section">
        <div class="plans-hero">
            <div class="plans-hero-badge">
                <span>âœ¨</span>
                <span data-translate="plans.heroTitle">Plan Your Perfect Egyptian Journey</span>
                <span>âœ¨</span>
            </div>
            <h2 class="plans-hero-title" data-translate="plans.title">Travel Plans</h2>
            <p class="plans-hero-subtitle" data-translate="plans.subtitle">Discover Egypt's 27 Governorates</p>
            
            <!-- Stats -->
            <div class="plans-stats">
                <div class="plans-stat">
                    <span class="plans-stat-number">27</span>
                    <span class="plans-stat-label" data-translate="plans.governoratesCount">Governorates</span>
                </div>
                <div class="plans-stat">
                    <span class="plans-stat-number">200+</span>
                    <span class="plans-stat-label" data-translate="plans.attractionsCount">Attractions</span>
                </div>
                <div class="plans-stat">
                    <span class="plans-stat-number">7000+</span>
                    <span class="plans-stat-label" data-translate="stats.years">Years of History</span>
                </div>
            </div>

            <!-- Start Interactive Plans Button -->
            <div style="text-align: center; margin-top: 30px;">
                <button class="wizard-start-btn" onclick="openTravelPlannerModal()" style="
                    padding: 18px 45px;
                    background: linear-gradient(135deg, #d4af37 0%, #f7ce68 100%);
                    color: #1a1a1a;
                    border: none;
                    border-radius: 50px;
                    font-size: 18px;
                    font-weight: 700;
                    cursor: pointer;
                    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
                    transition: all 0.3s ease;
                    display: inline-flex;
                    align-items: center;
                    gap: 12px;
                ">
                    <i class="fas fa-route"></i>
                    <span data-translate="plans.startPlanner">Start Planning Your Trip</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>

            <!-- Saved Plans Button -->
            <div style="text-align: center; margin-top: 20px;">
                <button class="saved-plans-btn" onclick="openSavedPlansModal()" style="
                    padding: 15px 35px;
                    background: transparent;
                    color: #d4af37;
                    border: 2px solid #d4af37;
                    border-radius: 50px;
                    font-size: 16px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: inline-flex;
                    align-items: center;
                    gap: 10px;
                ">
                    <i class="fas fa-bookmark"></i>
                    <span data-translate="plans.savedPlans">Saved Plans</span>
                    <span id="saved-plans-count" class="saved-plans-count" style="
                        background: #d4af37;
                        color: white;
                        padding: 2px 8px;
                        border-radius: 12px;
                        font-size: 12px;
                        font-weight: bold;
                    ">0</span>
                </button>
            </div>
        </div>

        <!-- Plans Container - Will be populated by JavaScript -->
        <div class="governorate-cards-grid" id="plans-cards-container"></div>
    </section>

    <section id="map" class="section map-section">
        <div class="section-header">
            <h2 class="section-title" data-translate="map.title">Explore Egypt Map</h2>
            <p class="section-subtitle" data-translate="map.subtitle">Interactive map of Egypt's tourist attractions</p>
        </div>
        
        <div class="map-container">
            <div class="map-actions">
                <button class="map-btn" id="openMapBtn" data-translate="map.openInMaps">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Open in Google Maps</span>
                </button>
            </div>
            <div class="map-iframe-wrapper">
                <iframe
                    id="googleMapFrame"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5246765.280911796!2d33.27734136198609!3d26.898047757173526!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14368976c35c36e9%3A0x2c45a00925c4c444!2z2YXYtdix!5e0!3m2!1sar!2seg!4v1769882517722!5m2!1sar!2segy"
                    style="border:0; width: 100%; height: 100%;"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </section>




    <!-- ========== AI TOURIST GUIDE SECTION ========== -->
    <section id="ai-guide" class="section">
        <div class="section-header">
            <h2 class="section-title" data-translate="ai.title">ğŸ›ï¸ AI Tourist Guide - Quad Engine</h2>
            <p class="section-subtitle" data-translate="ai.subtitle">Powered by 4 Advanced AI Engines with Smart Rotation</p>
        </div>

        <!-- AI Info Bar -->
        <div class="ai-info-bar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div id="engine-indicator" style="background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.9rem;">
                    <span style="opacity: 0.8;">Next Engine:</span>
                    <span id="next-engine-name" style="font-weight: 700; margin-left: 0.5rem;">ğŸ”® Gemini 2.5</span>
                </div>
                <div style="font-size: 0.85rem; opacity: 0.9;">
                    <span id="session-cost" style="font-weight: 600;">$0.00</span> spent today
                </div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <button onclick="showComparisonPanel()" style="background: rgba(255,255,255,0.2); border: none; padding: 0.5rem 1rem; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">
                    ğŸ“Š Compare
                </button>
                <button onclick="window.QuadAIGuide?.clearConversation()" style="background: rgba(255,255,255,0.2); border: none; padding: 0.5rem 1rem; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">
                    ğŸ—‘ï¸ Clear
                </button>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <!-- Chat Messages Area -->
            <div class="chat-messages" id="chat-messages">
                <!-- Welcome Message -->
                <div class="message bot-message" style="border-left: 4px solid #667eea;">
                    <div class="message-content">
                        <div style="font-weight: 700; margin-bottom: 0.5rem; color: #667eea;">ğŸ¤– Ù…Ø±Ø´Ø¯ Ù…ØµØ± Ø§Ù„Ø°ÙƒÙŠ</div>
                        <p>
                            Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù…Ø±Ø´Ø¯Ùƒ Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø³ÙŠØ§Ø­Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©. ğŸ‡ªğŸ‡¬
                        </p>
                        <p style="margin-top: 0.5rem;">
                            Ø£Ø³ØªØ®Ø¯Ù… <strong>4 Ù…Ø­Ø±ÙƒØ§Øª Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù…Ø©</strong> Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª:
                        </p>
                        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                            <li>ğŸ”® <strong>Gemini 2.5</strong> - Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„Ø¯Ù‚Ø©</li>
                            <li>âš¡ <strong>Groq Llama</strong> - Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</li>
                            <li>ğŸ¯ <strong>Cohere</strong> - Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ‚</li>
                            <li>ğŸŒŸ <strong>Mistral</strong> - Ø§Ù„ØªÙˆØ§Ø²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ</li>
                        </ul>
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.9;">
                            Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ©ØŒ Ø§Ù„ØªØ®Ø·ÙŠØ· Ù„Ù„Ø±Ø­Ù„Ø§ØªØŒ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙØŒ Ø§Ù„Ø·Ù‚Ø³ØŒ Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ù…ØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø³ÙŠØ§Ø­Ø© ÙÙŠ Ù…ØµØ±!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Chat Input Area -->
            <div class="chat-input-area">
                <input
                        type="text"
                        id="chat-input"
                        class="chat-input"
                        placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡ Ù…ØªØ¹Ù„Ù‚ Ø¨Ø§Ù„Ø³ÙŠØ§Ø­Ø© ÙÙŠ Ù…ØµØ±..."
                        data-translate-placeholder="ai.placeholder"
                >
                <button id="send-btn" class="send-btn">
                    <span>Ø¥Ø±Ø³Ø§Ù„ ğŸš€</span>
                </button>
            </div>

            <!-- Quick Question Buttons -->
            <div class="quick-questions">
                <button class="quick-btn" onclick="sendQuickQuestion('Ø§Ù‚ØªØ±Ø­ Ù„ÙŠ Ø®Ø·Ø© Ø³ÙŠØ§Ø­ÙŠØ© Ù„Ù…Ø¯Ø© 3 Ø£ÙŠØ§Ù… ÙÙŠ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©')">ğŸ—ºï¸ Ø®Ø·Ø© 3 Ø£ÙŠØ§Ù…</button>
                <button class="quick-btn" onclick="sendQuickQuestion('Ù…Ø§ Ù‡ÙŠ Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ© ÙÙŠ Ø§Ù„Ø£Ù‚ØµØ±ØŸ')">ğŸ›ï¸ Ø§Ù„Ø£Ù‚ØµØ±</button>
                <button class="quick-btn" onclick="sendQuickQuestion('Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø³ÙØ± Ø¥Ù„Ù‰ Ø´Ø±Ù… Ø§Ù„Ø´ÙŠØ®')">ğŸ–ï¸ Ø´Ø±Ù… Ø§Ù„Ø´ÙŠØ®</button>
                <button class="quick-btn" onclick="sendQuickQuestion('ÙƒÙ… ØªÙƒÙ„ÙØ© Ø±Ø­Ù„Ø© Ø¹Ø§Ø¦Ù„ÙŠØ© Ù„Ù…Ø¯Ø© Ø£Ø³Ø¨ÙˆØ¹ØŸ')">ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ©</button>
                <button class="quick-btn" onclick="sendQuickQuestion('Ù…Ø§ Ù‡Ùˆ Ø£ÙØ¶Ù„ ÙˆÙ‚Øª Ù„Ø²ÙŠØ§Ø±Ø© Ù…ØµØ±ØŸ')">ğŸ“… Ø£ÙØ¶Ù„ ÙˆÙ‚Øª</button>
            </div>
        </div>

        <!-- Comparison Panel (Hidden by default) -->
        <div id="comparison-panel" style="display: none; margin-top: 2rem; background: var(--bg-secondary, #1a1f2e); border-radius: 16px; padding: 2rem; border: 2px solid var(--border-color, #2d3748);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3 style="font-size: 1.5rem; font-weight: 800;">ğŸ“Š Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h3>
                <button onclick="hideComparisonPanel()" style="background: transparent; border: none; color: #999; font-size: 1.5rem; cursor: pointer;">Ã—</button>
            </div>
            
            <!-- Session Stats -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                <div style="background: var(--bg-tertiary, #2d3748); padding: 1rem; border-radius: 12px; text-align: center;">
                    <div id="total-requests-panel" style="font-size: 2rem; font-weight: 800; color: #667eea;">0</div>
                    <div style="font-size: 0.85rem; color: #999; margin-top: 0.3rem;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
                </div>
                <div style="background: var(--bg-tertiary, #2d3748); padding: 1rem; border-radius: 12px; text-align: center;">
                    <div id="total-cost-panel" style="font-size: 2rem; font-weight: 800; color: #667eea;">$0.00</div>
                    <div style="font-size: 0.85rem; color: #999; margin-top: 0.3rem;">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
                </div>
                <div style="background: var(--bg-tertiary, #2d3748); padding: 1rem; border-radius: 12px; text-align: center;">
                    <div id="success-rate-panel" style="font-size: 2rem; font-weight: 800; color: #10b981;">100%</div>
                    <div style="font-size: 0.85rem; color: #999; margin-top: 0.3rem;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</div>
                </div>
                <div style="background: var(--bg-tertiary, #2d3748); padding: 1rem; border-radius: 12px; text-align: center;">
                    <div id="avg-time-panel" style="font-size: 2rem; font-weight: 800; color: #667eea;">0ms</div>
                    <div style="font-size: 0.85rem; color: #999; margin-top: 0.3rem;">Ù…ØªÙˆØ³Ø· Ø§Ù„ÙˆÙ‚Øª</div>
                </div>
            </div>
            
            <!-- Engines Comparison -->
            <div id="engines-comparison-panel">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
        </div>
    </section>

    <!-- ========== CALCULATOR SECTION ========== -->
    <section id="calculator" class="section">
        <div class="calculator-container">
            
            <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
            <div class="calculator-header">
                <h2 class="calculator-title">
                    <span data-translate="calculator.title">Calculate Your Trip Budget</span>
                </h2>
                <p class="calculator-subtitle">
                    <span data-translate="calculator.subtitle">Realistic travel cost estimation in Egypt - 27 Governorates</span>
                </p>
            </div>

            <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
            <div class="calculator-inputs">
                
                <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© -->
                <div class="input-group">
                    <label for="governorateSelect" class="input-label">
                        <span data-translate="calculator.governorate">Governorate</span>
                    </label>
                    <select id="governorateSelect" class="input-select">
                        <option value="" data-translate="calculator.selectGovernorate">-- Select Governorate --</option>
                    </select>
                </div>

                <!-- Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… -->
                <div class="input-group">
                    <label for="daysInput" class="input-label">
                        <span data-translate="calculator.days">Number of Days</span>
                    </label>
                    <input type="number" id="daysInput" class="input-number" min="1" max="30" value="3">
                </div>

                <!-- Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ø®Ø§Øµ -->
                <div class="input-group">
                    <label for="peopleInput" class="input-label">
                        <span data-translate="calculator.people">Number of People</span>
                    </label>
                    <input type="number" id="peopleInput" class="input-number" min="1" max="10" value="2">
                </div>

                <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù…Ù„Ø© -->
                <div class="input-group">
                    <label for="currencySelect" class="input-label">
                        <span data-translate="calculator.currency">Currency</span>
                    </label>
                    <select id="currencySelect" class="input-select">
                        <option value="EGP">EGP - Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ</option>
                    </select>
                </div>

            </div>

            <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
            <div class="calculator-results" id="calculatorResults">
                
                <!-- Context Ø°ÙƒÙŠ -->
                <div class="smart-context" id="smartContext">
                    <span class="context-icon">ğŸ’¡</span>
                    <span class="context-text" id="contextText">
                        <span data-translate="calculator.selectMessage">Select a governorate to see the estimate</span>
                    </span>
                </div>

                <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙƒÙ„ÙØ© -->
                <div class="results-breakdown">
                    
                    <div class="breakdown-item">
                        <span class="breakdown-label">
                            <span class="label-icon">ğŸ¨</span>
                            <span data-translate="calculator.accommodation">Accommodation</span>
                        </span>
                        <span class="breakdown-value" id="accommodationCost">0</span>
                    </div>

                    <div class="breakdown-item">
                        <span class="breakdown-label">
                            <span class="label-icon">ğŸ½ï¸</span>
                            <span data-translate="calculator.food">Food</span>
                        </span>
                        <span class="breakdown-value" id="foodCost">0</span>
                    </div>

                    <div class="breakdown-item">
                        <span class="breakdown-label">
                            <span class="label-icon">ğŸš—</span>
                            <span data-translate="calculator.transport">Transportation</span>
                        </span>
                        <span class="breakdown-value" id="transportCost">0</span>
                    </div>

                    <div class="breakdown-item">
                        <span class="breakdown-label">
                            <span class="label-icon">ğŸ­</span>
                            <span data-translate="calculator.activities">Activities</span>
                        </span>
                        <span class="breakdown-value" id="activitiesCost">0</span>
                    </div>

                </div>

                <!-- Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ -->
                <div class="results-total">
                    <div class="total-label">
                        <span data-translate="calculator.totalCost">Estimated Total Cost</span>
                    </div>
                    <div class="total-value" id="totalCost">0 <span class="currency-symbol">EGP</span></div>
                </div>

                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                <div class="results-info">
                    <div class="info-item">
                        <span class="info-label">
                            <span data-translate="calculator.perPerson">Per person</span>
                        </span>
                        <span class="info-value" id="perPersonCost">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">
                            <span data-translate="calculator.perDay">Per day</span>
                        </span>
                        <span class="info-value" id="perDayCost">0</span>
                    </div>
                </div>

                <!-- Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© -->
                <div class="disclaimer-note">
                    <span class="disclaimer-icon">â„¹ï¸</span>
                    <span class="disclaimer-text">
                        <span data-translate="calculator.disclaimer">Prices are estimates and may vary by season and travel style</span>
                    </span>
                </div>

            </div>

        </div>
    </section>

    <!-- ========== WEATHER SECTION ========== -->
    <section id="weather" class="section">
        <div class="section-header">
            <h2 class="section-title" data-translate="weather.title">Weather Forecast</h2>
            <p class="section-subtitle" data-translate="weather.subtitle">Current weather and 7-day forecast for major Egyptian cities</p>
        </div>

        <!-- Weather Widget -->
        <div class="weather-widget">
            <div class="weather-card">
                <div class="weather-header">
                    <div class="weather-city-selector">
                        <select id="weather-city-select"></select>
                    </div>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <button class="weather-add-plan-btn" id="weather-add-plan-btn" onclick="addCurrentWeatherToPlan()" style="
                            background: rgba(255, 255, 255, 0.2);
                            border: 2px solid rgba(255, 255, 255, 0.3);
                            color: white;
                            padding: 0.5rem 1rem;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                            transition: all 0.3s;
                        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                            <i class="fas fa-plus"></i>
                            <span data-translate="weather.addToPlan">Add to Plan</span>
                        </button>
                        <div class="weather-last-update">
                            <span data-translate="weather.lastUpdate">Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</span>
                            <span id="last-update">--:--</span>
                        </div>
                    </div>
                </div>

                <div class="weather-current">
                    <div class="weather-icon-large" id="weather-icon">
                        <div style="font-size: 5rem;">ğŸŒ¤ï¸</div>
                    </div>
                    <div class="weather-temp-main">
                        <div class="current-temp" id="current-temp">--</div>
                        <div class="weather-desc" id="weather-desc">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                    </div>
                </div>

                <div class="weather-details">
                    <div class="weather-detail-item">
                        <div class="weather-detail-icon">ğŸŒ¡ï¸</div>
                        <div class="weather-detail-value">
                            <span id="feels-like">--</span>Â°C
                        </div>
                        <div class="weather-detail-label" data-translate="weather.feelsLike">ÙŠØ¨Ø¯Ùˆ ÙƒØ£Ù†Ù‡</div>
                    </div>

                    <div class="weather-detail-item">
                        <div class="weather-detail-icon">ğŸ’§</div>
                        <div class="weather-detail-value">
                            <span id="humidity">--</span>%
                        </div>
                        <div class="weather-detail-label" data-translate="weather.humidity">Ø§Ù„Ø±Ø·ÙˆØ¨Ø©</div>
                    </div>

                    <div class="weather-detail-item">
                        <div class="weather-detail-icon">ğŸ’¨</div>
                        <div class="weather-detail-value">
                            <span id="wind-speed">--</span> km/h
                        </div>
                        <div class="weather-detail-label" data-translate="weather.wind">Ø§Ù„Ø±ÙŠØ§Ø­</div>
                    </div>

                    <div class="weather-detail-item">
                        <div class="weather-detail-icon">ğŸŒ…</div>
                        <div class="weather-detail-value" id="sunrise">--:--</div>
                        <div class="weather-detail-label" data-translate="weather.sunrise">Ø§Ù„Ø´Ø±ÙˆÙ‚</div>
                    </div>

                    <div class="weather-detail-item">
                        <div class="weather-detail-icon">ğŸŒ‡</div>
                        <div class="weather-detail-value" id="sunset">--:--</div>
                        <div class="weather-detail-label" data-translate="weather.sunset">Ø§Ù„ØºØ±ÙˆØ¨</div>
                    </div>

                    <div class="weather-detail-item">
                        <div class="weather-detail-icon">ğŸ“Š</div>
                        <div class="weather-detail-value">
                            <span id="pressure">--</span> hPa
                        </div>
                        <div class="weather-detail-label" data-translate="weather.pressure">Ø§Ù„Ø¶ØºØ·</div>
                    </div>
                </div>

                <div class="weather-forecast">
                    <div class="forecast-title" data-translate="weather.forecast">Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª Ù„Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</div>
                    <div class="forecast-container" id="forecast-container">
                        <!-- Forecast items will be added here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Weather Info -->
        <div class="weather-info" style="margin-top: 2rem; padding: 1.5rem; background: var(--bg-secondary); border-radius: var(--radius-lg); text-align: center;">
            <p style="margin: 0; opacity: 0.8;">
                <i class="fas fa-info-circle"></i>
                <span data-translate="weather.poweredBy">Powered by</span>
                <strong>Open-Meteo</strong> - 
                <span data-translate="weather.freeService">Free weather API service</span>
            </p>
        </div>
    </section>

    <!-- ========== SETTINGS SECTION ========== -->
    <section id="settings" class="section">
        <div class="section-header">
            <h2 class="section-title" data-translate="settings.title">Settings</h2>
            <p class="section-subtitle" data-translate="settings.subtitle">Customize your experience</p>
        </div>

        <div class="settings-container">
            <!-- Language Settings -->
            <div class="settings-card">
                <h3 data-translate="settings.lang.title">Language Preferences</h3>
                <p data-translate="settings.lang.desc">Choose your preferred language</p>

                <div class="language-options">
                    <label class="radio-option">
                        <input type="radio" name="language" value="en" checked>
                        <span>ğŸ‡¬ğŸ‡§ English</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="language" value="ar">
                        <span>ğŸ‡ªğŸ‡¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="language" value="fr">
                        <span>ğŸ‡«ğŸ‡· FranÃ§ais (French)</span>
                    </label>
                </div>

                <label class="checkbox-option">
                    <input type="checkbox" id="auto-detect-lang" checked>
                    <span data-translate="settings.lang.auto">Auto-detect device language</span>
                </label>
            </div>

            <!-- Theme Settings -->
            <div class="settings-card">
                <h3 data-translate="settings.theme.title">Theme Settings</h3>
                <p data-translate="settings.theme.desc">Choose your preferred color theme</p>

                <div class="theme-options">
                    <button class="theme-option-btn active" data-theme="light">
                        <span class="theme-icon">â˜€ï¸</span>
                        <span data-translate="settings.theme.light">Light Mode</span>
                    </button>
                    <button class="theme-option-btn" data-theme="dark">
                        <span class="theme-icon">ğŸŒ™</span>
                        <span data-translate="settings.theme.dark">Dark Mode</span>
                    </button>
                </div>

                <label class="checkbox-option">
                    <input type="checkbox" id="auto-detect-theme" checked>
                    <span data-translate="settings.theme.auto">Auto-detect device theme</span>
                </label>
            </div>

            <!-- Accessibility Settings -->
            <div class="settings-card">
                <h3 data-translate="settings.accessibility.title">Accessibility</h3>
                <p data-translate="settings.accessibility.desc">Customize accessibility features</p>

                <label class="checkbox-option">
                    <input type="checkbox" id="reduced-motion">
                    <span data-translate="settings.accessibility.reducedMotion">Reduce motion</span>
                </label>

                <label class="checkbox-option">
                    <input type="checkbox" id="high-contrast">
                    <span data-translate="settings.accessibility.highContrast">High contrast mode</span>
                </label>
            </div>

            <!-- About Project -->
            <div class="settings-card">
                <h3 data-translate="settings.about.title">About This Project</h3>
                <p data-translate="settings.about.desc">
                    This is a OMAR web design project for a Middle 2 school competition.
                    Built with HTML, CSS, and JavaScript to showcase Egypt's tourism attractions.
                </p>
                <p data-translate="settings.about.tech">
                    <strong>Technologies:</strong> HTML5, CSS3, Vanilla JavaScript
                </p>
            </div>
        </div>
    </section>

</main>

<!-- ========== FOOTER ========== -->
<footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h3>Discover Egypt</h3>
            <p data-translate="footer.tagline">Your gateway to Egypt's wonders</p>
        </div>

        <div class="footer-section">
            <h4 data-translate="footer.contact">Contact</h4>
            <p>Email: <a href="/cdn-cgi/l/email-protection#2a43444c456a4e435949455c4f58074f4d535a5e04494547"><span class="__cf_email__" data-cfemail="452c2b232a05212c36262a3320376820223c35316b262a28">[email&#160;protected]</span></a></p>
            <p>Phone: +20 123 456 789</p>
        </div>

        <div class="footer-section">
            <h4 data-translate="footer.social">Follow Us</h4>
            <div class="social-links">
                <a href="https://www.facebook.com/DiscoverEgypt" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/discover_egypt" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://twitter.com/DiscoverEgypt" target="_blank" rel="noopener noreferrer" aria-label="Twitter"><i class="fab fa-x-twitter"></i></a>
                <a href="https://www.youtube.com/@DiscoverEgypt" target="_blank" rel="noopener noreferrer" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>
            &copy; 2026 <span data-translate="site.title">Discover Egypt</span> - 
            OMAR <span data-translate="site.projectType">Web Design Project</span> - Middle 2
        </p>
    </div>
</footer>

<!-- ========== SEARCH MODAL ========== -->
<div class="search-modal" id="search-modal" role="dialog" aria-modal="true" aria-labelledby="search-title">
    <div class="search-modal-content">
        <button class="search-close" id="search-close" aria-label="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø«">&times;</button>
        <h2 class="search-title" id="search-title" data-translate="search.title">Search Places</h2>
        
        <div class="search-input-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="search-input" class="search-input" placeholder="Search for places, cities..." data-translate-placeholder="search.placeholder">
        </div>
        
        <div id="search-results" class="search-results"></div>
        <div id="search-no-results" class="search-no-results" style="display: none;">
            <i class="fas fa-search"></i>
            <p data-translate="search.no_results">No places found</p>
        </div>
    </div>
</div>

<!-- ========== LOADING OVERLAY ========== -->
<div class="loading-overlay" id="loading-overlay" style="display: none;">
    <div class="loading-spinner">
        <div class="spinner"></div>
        <p data-translate="common.loading">Loading...</p>
    </div>
</div>

<!-- ========== MESSAGE CONTAINER ========== -->
<div id="message-container" aria-live="polite" aria-atomic="true"></div>


<!-- ========== JAVASCRIPT LINKS ========== -->

<!-- Logger System - ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­Ù…Ù‘Ù„ Ø£ÙˆÙ„Ø§Ù‹ -->
<script src="js/utils/logger.js"></script>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>

<!-- Leaflet JS for maps -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Translations Data (Unified) -->
<script src="data/translations-enhanced.js"></script>

<!-- Places Data -->
<script src="data/places-enhanced.js"></script>

<!-- Place Images -->
<script src="data/place-images.js"></script>

<!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù‘Ù†Ø© -->
<script src="js/auth/auth-system.js"></script>

<!-- Core: bootstrap first, then features -->
<script src="js/core/app.js"></script>
<script src="js/core/navigation.js"></script>
<script src="js/core/theme.js"></script>
<script src="js/core/language.js"></script>

<!-- Language Fixes -->
<script src="js/language-fixes.js"></script>

<!-- Features: filters, map -->
<script src="js/features/filters.js"></script>
<script src="js/features/map.js"></script>

<!-- Api keys -->
<script src="js/config/%20keys.js"></script>

<!-- AI Guide - Gemini Powered (NEW!) -->
<script src="js/ai-guide-quad.js"></script>

<!-- Explore Dynamic Cards (No Images) -->
<script src="js/explore-dynamic.js"></script>

<!-- Search Engine - Advanced Multi-language -->
<script src="js/search-advanced.js"></script>

<!-- User Menu System - Enhanced -->
<script src="js/user-menu-enhanced.js"></script>

<!-- Travel Plans - OLD SYSTEM DISABLED -->
<!-- <script src="js/plans-advanced.js"></script> -->
<!-- <script src="js/plans-wizard.js"></script> -->
<script src="js/interactive-plans-system.js"></script>

<!-- Smart Plans Integration (Weather + AI) -->
<script src="js/smart-plans-integration.js"></script>

<!-- Budget Calculator -->
<script src="js/calculator.js"></script>

<!-- Weather API -->
<script src="js/weather-api.js"></script>

<!-- Separate Weather Tools -->
<script src="js/weather-tools-separate.js"></script>

<!-- Utils -->
<script src="js/utils/helpers.js"></script>
<script src="js/utilities.js"></script>

<!-- Saved Plans Manager -->
<script src="js/saved-plans-manager.js"></script>


<!-- Travel Planner Modal -->
<div id="travel-planner-modal" class="travel-planner-modal" style="display: none;">
    <div class="travel-planner-modal-overlay" onclick="closeTravelPlannerModal()"></div>
    <div class="travel-planner-modal-content">
        <button class="travel-planner-close-btn" onclick="closeTravelPlannerModal()" title="Close">
            <i class="fas fa-times"></i>
        </button>
        <iframe id="travel-planner-iframe" src="" frameborder="0"></iframe>
    </div>
</div>

<!-- Saved Plans Modal -->
<div id="saved-plans-modal" class="saved-plans-modal" style="display: none;">
    <div class="saved-plans-modal-overlay" onclick="closeSavedPlansModal()"></div>
    <div class="saved-plans-modal-content">
        <div class="saved-plans-header">
            <h2 data-translate="plans.savedPlans">Saved Plans</h2>
            <button class="saved-plans-close-btn" onclick="closeSavedPlansModal()" title="Close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="saved-plans-body" id="saved-plans-list">
            <!-- Plans will be loaded here -->
            <div class="saved-plans-loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p data-translate="common.loading">Loading...</p>
            </div>
        </div>
    </div>
</div>

<script>
// Travel Planner Modal Functions
function openTravelPlannerModal() {
    const modal = document.getElementById('travel-planner-modal');
    const iframe = document.getElementById('travel-planner-iframe');
    
    if (modal && iframe) {
        // Set iframe source
        iframe.src = 'planner/index.html';
        
        // Show modal
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Animation
        setTimeout(() => {
            modal.classList.add('active');
        }, 10);
    }
}

function closeTravelPlannerModal() {
    const modal = document.getElementById('travel-planner-modal');
    const iframe = document.getElementById('travel-planner-iframe');
    
    if (modal) {
        modal.classList.remove('active');
        
        setTimeout(() => {
            modal.style.display = 'none';
            document.body.style.overflow = '';
            
            // Clear iframe to stop any ongoing processes
            if (iframe) {
                iframe.src = '';
            }
        }, 300);
    }
}

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeTravelPlannerModal();
    }
});
</script>

<!-- ========== QUAD AI GUIDE INTEGRATION ========== -->
<script>
// Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
async function sendAIMessage() {
    const chatInput = document.getElementById('chat-input');
    const sendBtn = document.getElementById('send-btn');
    const chatMessages = document.getElementById('chat-messages');
    
    if (!chatInput || !sendBtn || !chatMessages) return;
    
    const message = chatInput.value.trim();
    if (!message || !window.QuadAIGuide) return;
    
    // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    chatInput.disabled = true;
    sendBtn.disabled = true;
    
    // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    chatInput.value = '';
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    addChatMessage(message, 'user');
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    const loadingId = 'loading-' + Date.now();
    const loadingDiv = document.createElement('div');
    loadingDiv.id = loadingId;
    loadingDiv.className = 'message bot-message';
    loadingDiv.style.borderLeft = '4px solid #8b5cf6';
    loadingDiv.innerHTML = `
        <div class="message-content">
            <div style="display: flex; align-items: center; gap: 0.8rem;">
                <div style="width: 20px; height: 20px; border: 3px solid #8b5cf6; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ø¥Ø¬Ø§Ø¨Ø©...</span>
            </div>
        </div>
    `;
    chatMessages.appendChild(loadingDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    try {
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        const result = await window.QuadAIGuide.sendMessage(message);
        
        // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        const loadingElement = document.getElementById(loadingId);
        if (loadingElement) {
            loadingElement.remove();
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø¯ Ø§Ù„Ù…Ø±Ø´Ø¯
        addChatMessage(result.response, 'ai', result.engine, {
            time: result.totalTime,
            attempts: result.attempts
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
        updateEngineIndicator();
        
    } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
        
        // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        const loadingElement = document.getElementById(loadingId);
        if (loadingElement) {
            loadingElement.remove();
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
        addChatMessage('âŒ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message + '\n\nğŸ’¡ ØªØ£ÙƒØ¯ Ù…Ù†:\nâ€¢ ÙˆØ¶Ø¹ Ù…ÙØ§ØªÙŠØ­ API Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­\nâ€¢ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª\nâ€¢ Ø¹Ø¯Ù… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ', 'ai');
    } finally {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        chatInput.disabled = false;
        sendBtn.disabled = false;
        chatInput.focus();
    }
}

// Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
function addChatMessage(content, type, engine = null, meta = null) {
    const chatMessages = document.getElementById('chat-messages');
    if (!chatMessages) return;
    
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message ' + (type === 'user' ? 'user-message' : 'bot-message');
    
    let html = '';
    
    if (type === 'ai' && engine) {
        const engineConfig = window.AI_ENGINES[engine.key];
        messageDiv.style.borderLeft = `4px solid ${engineConfig.color}`;
        html += `
            <div class="message-content">
                <div style="font-weight: 700; margin-bottom: 0.5rem; color: ${engineConfig.color};">
                    ${engineConfig.emoji} ${engineConfig.nameAr}
                </div>
                <div>${formatMessageContent(content)}</div>
        `;
        
        if (meta) {
            html += `
                <div style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.1); display: flex; gap: 1rem; font-size: 0.75rem; color: #999;">
                    <span>â±ï¸ ${meta.time}ms</span>
                    <span>ğŸ”„ ${meta.attempts} Ù…Ø­Ø§ÙˆÙ„Ø©</span>
                </div>
            `;
        }
        
        html += `</div>`;
    } else if (type === 'user') {
        messageDiv.style.borderLeft = '4px solid #667eea';
        html = `
            <div class="message-content">
                <div style="font-weight: 700; margin-bottom: 0.5rem; color: #667eea;">
                    ğŸ‘¤ Ø£Ù†Øª
                </div>
                <div>${formatMessageContent(content)}</div>
            </div>
        `;
    } else {
        messageDiv.style.borderLeft = '4px solid #667eea';
        html = `<div class="message-content">${formatMessageContent(content)}</div>`;
    }
    
    messageDiv.innerHTML = html;
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Ø¯Ø§Ù„Ø© ØªÙ†Ø³ÙŠÙ‚ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
function formatMessageContent(text) {
    // Ø¯Ø¹Ù… Markdown Ø§Ù„Ø¨Ø³ÙŠØ·
    text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
    text = text.replace(/`(.*?)`/g, '<code style="background: rgba(255,255,255,0.1); padding: 0.2rem 0.4rem; border-radius: 4px;">$1</code>');
    text = text.replace(/\n/g, '<br>');
    return text;
}

// Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø³Ø¤Ø§Ù„ Ø³Ø±ÙŠØ¹
function sendQuickQuestion(question) {
    const chatInput = document.getElementById('chat-input');
    if (chatInput) {
        chatInput.value = question;
        sendAIMessage();
    }
}

// Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
function showComparisonPanel() {
    const panel = document.getElementById('comparison-panel');
    if (panel) {
        panel.style.display = 'block';
        updateComparisonPanel();
    }
}

// Ø¯Ø§Ù„Ø© Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
function hideComparisonPanel() {
    const panel = document.getElementById('comparison-panel');
    if (panel) {
        panel.style.display = 'none';
    }
}

// Ø¯Ø§Ù„Ø© ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©
function updateComparisonPanel() {
    if (!window.QuadAIGuide) return;
    
    try {
        const stats = window.QuadAIGuide.getStats();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        document.getElementById('total-requests-panel').textContent = stats.session.requests || 0;
        document.getElementById('total-cost-panel').textContent = '$' + (stats.session.cost || 0).toFixed(4);
        
        const successRate = stats.session.requests > 0
            ? ((stats.session.successCount || stats.session.requests) / stats.session.requests * 100)
            : 100;
        document.getElementById('success-rate-panel').textContent = successRate.toFixed(0) + '%';
        
        document.getElementById('avg-time-panel').textContent = 
            (stats.session.avgResponseTime || 0).toFixed(0) + 'ms';
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙƒÙ„ÙØ© ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ
        const sessionCost = document.getElementById('session-cost');
        if (sessionCost) {
            sessionCost.textContent = '$' + (stats.session.cost || 0).toFixed(4);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª
        const comparison = stats.engines;
        const container = document.getElementById('engines-comparison-panel');
        if (container && comparison) {
            container.innerHTML = '';
            
            Object.entries(comparison).forEach(([key, data]) => {
                const card = document.createElement('div');
                card.style.cssText = 'background: var(--bg-tertiary, #2d3748); padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border-left: 4px solid ' + data.color;
                
                const scoreColor = parseFloat(data.performance.score) >= 80 
                    ? '#10b981' 
                    : parseFloat(data.performance.score) >= 60
                    ? '#f59e0b'
                    : '#ef4444';
                
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2.5rem;">${data.emoji}</div>
                            <div>
                                <h4 style="font-size: 1.1rem; margin: 0;">${data.nameAr}</h4>
                                <div style="font-size: 0.85rem; color: #999; margin-top: 0.2rem;">${data.name}</div>
                            </div>
                        </div>
                        <div style="width: 60px; height: 60px; border-radius: 50%; background: ${scoreColor}; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 800; color: white;">
                            ${data.performance.score}
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
                        ${data.strengths.map(s => `<span style="padding: 0.4rem 0.8rem; background: rgba(59, 130, 246, 0.1); border-radius: 12px; font-size: 0.75rem; color: #999;">âœ“ ${s}</span>`).join('')}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.8rem;">
                        <div>
                            <div style="font-size: 0.75rem; color: #666;">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
                            <div style="font-size: 1rem; font-weight: 700; margin-top: 0.2rem;">${data.stats.requests}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: #666;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</div>
                            <div style="font-size: 1rem; font-weight: 700; margin-top: 0.2rem;">${data.stats.successRate}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: #666;">Ø§Ù„ÙˆÙ‚Øª</div>
                            <div style="font-size: 1rem; font-weight: 700; margin-top: 0.2rem;">${data.stats.avgResponseTime}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.75rem; color: #666;">Ø§Ù„ØªÙƒÙ„ÙØ©</div>
                            <div style="font-size: 1rem; font-weight: 700; margin-top: 0.2rem;">${data.stats.totalCost}</div>
                        </div>
                    </div>
                    
                    <div style="height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; margin-top: 1rem;">
                        <div style="height: 100%; width: ${data.stats.successRate}; background: ${data.color}; transition: width 0.5s ease;"></div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
    } catch (error) {
        console.error('Error updating comparison panel:', error);
    }
}

// ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù‚Ø§Ø¯Ù…
function updateEngineIndicator() {
    if (!window.QuadAIGuide) return;
    
    try {
        const nextEngine = window.QuadAIGuide.getNextEngine();
        if (nextEngine) {
            const indicator = document.getElementById('next-engine-name');
            if (indicator) {
                indicator.textContent = nextEngine.emoji + ' ' + nextEngine.nameAr;
            }
        }
    } catch (error) {
        console.error('Error updating engine indicator:', error);
    }
}

// ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ Ù„Ù„Ù…Ø¤Ø´Ø±Ø§Øª
setInterval(() => {
    updateEngineIndicator();
    const panel = document.getElementById('comparison-panel');
    if (panel && panel.style.display !== 'none') {
        updateComparisonPanel();
    }
}, 5000);

// Ø±Ø¨Ø· Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø±Ø´Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    const sendBtn = document.getElementById('send-btn');
    const chatInput = document.getElementById('chat-input');
    
    // Ø±Ø¨Ø· Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    if (sendBtn) {
        sendBtn.addEventListener('click', sendAIMessage);
    }
    
    // Ø±Ø¨Ø· Enter ÙÙŠ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    if (chatInput) {
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendAIMessage();
            }
        });
    }
    
    console.log('âœ… ØªÙ… Ø±Ø¨Ø· Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø±Ø´Ø¯ Ø§Ù„Ø°ÙƒÙŠ');
    
    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¸Ù‡ÙˆØ± Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    setTimeout(function() {
        const authButtons = document.getElementById('auth-buttons');
        const authMobileItem = document.getElementById('auth-mobile-item');
        const userMenuContainer = document.getElementById('user-menu-container');
        
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Firebase Ø£Ùˆ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ØŒ Ø£Ø¸Ù‡Ø± Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        if (typeof firebase === 'undefined' || !window.currentUser) {
            if (authButtons && authButtons.style.display === 'none') {
                authButtons.style.display = 'flex';
                console.log('âœ… ØªÙ… Ø¹Ø±Ø¶ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (fallback)');
            }
            if (authMobileItem && authMobileItem.style.display === 'none') {
                authMobileItem.style.display = 'block';
            }
            if (userMenuContainer) {
                userMenuContainer.style.display = 'none';
            }
        }
    }, 1000); // Ø§Ù†ØªØ¸Ø± Ø«Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
});
</script>

</body>
</html>
